<% url = ''#url_for worker #if policy(worker).show? %>

<%= content_tag :div, class: "card #{ worker.status_class } mb-3 worker-card", 'data-href': url do %>
  <div class="card-header"><%= worker.name %></div>
  <div class="card-body">
    <p class><b>IPs:</b> <%= worker.ips.to_sentence(two_words_connector: ', ', last_word_connector: ', ') %></h5>

    <p class="card-text">
      <%= worker.api_type %> api version <%= worker.api_version %>

      <%= worker.webhook_supported ? 'with' : 'without' %> webhook support
    </p>

    <% if worker.task_status? %>
      <p class="card-title"><b>Tasks:</b></p>
      <% worker.task_status.each do |status| %>
        <p class="card-text"> <%= status %> </p>
      <% end %>
    <% end %>

    <p class="card-text"><small class="text-muted">Last update <%= Time.at(Time.zone.now - worker.updated_at).gmtime.strftime("%H:%M:%S") %> ago</small></p>
  </div>
<% end %>
